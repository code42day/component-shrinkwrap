#!/usr/bin/env node

/**
 * Module dependencies.
 */

var program = require('commander');
var fs = require('fs');
var shrinkwrap = require('..');

// parse argv

program
  .option('-S, --save', 'save currently installed component versions to component-shrinkwrap.json')
  .option('-I, --install', 'install components specified in component-shrinkwrap.json')
  .option('-v, --verbose', 'output names of the installed files')
  .parse(process.argv);

var filename = 'component-shrinkwrap.json';

if (program.save || (!program.install && fs.existsSync('components'))) {
  shrinkwrap.save(filename);
} else if (program.install || fs.existsSync(filename)) {
  shrinkwrap.install(filename, {
    verbose: program.verbose
  });
} else {
  program.help();
}
